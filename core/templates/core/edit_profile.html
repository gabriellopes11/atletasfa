{% extends "base.html" %}
{% load static %}

{% block title %}Editar Perfil{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h4 class="mb-0">Editar Perfil</h4>
          <a href="{% url 'dashboard' %}" class="btn btn-light btn-sm">
            <i class="fas fa-arrow-left me-1"></i>Voltar
          </a>
        </div>
        <div class="card-body">

          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
          {% endif %}

          <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}

            <!-- Foto -->
            <div class="row mb-4">
              <div class="col-md-4 text-center">
                {% if profile.photo %}
                  <img src="{{ profile.photo.url }}" class="img-fluid rounded mb-3" alt="{{ profile.full_name }}" style="max-height: 200px;">
                  <p class="small text-muted">Foto atual</p>
                {% else %}
                  <div class="bg-light rounded p-4 mb-3">
                    <i class="fas fa-user-circle fa-5x text-secondary"></i>
                  </div>
                  <p class="small text-muted">Sem foto de perfil</p>
                {% endif %}
              </div>
              <div class="col-md-8">
                <label for="{{ form.photo.id_for_label }}" class="form-label">Foto de Perfil</label>
                {{ form.photo }}
                {% if form.photo.errors %}
                  <div class="text-danger small">{{ form.photo.errors }}</div>
                {% endif %}
                <div class="form-text small text-muted">Formatos aceitos: JPG, PNG. Tamanho máximo: 5MB.</div>
              </div>
            </div>

            <!-- Dados básicos -->
            <div class="mb-3">
              <label for="{{ form.full_name.id_for_label }}" class="form-label">Nome Completo</label>
              {{ form.full_name }}
              {% if form.full_name.errors %}
                <div class="text-danger small">{{ form.full_name.errors }}</div>
              {% endif %}
            </div>

            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="{{ form.age.id_for_label }}" class="form-label">Idade</label>
                {{ form.age }}
                {% if form.age.errors %}
                  <div class="text-danger small">{{ form.age.errors }}</div>
                {% endif %}
              </div>
              <div class="col-md-4 mb-3">
                <label for="{{ form.height.id_for_label }}" class="form-label">Altura (m)</label>
                {{ form.height }}
                {% if form.height.errors %}
                  <div class="text-danger small">{{ form.height.errors }}</div>
                {% endif %}
              </div>
              <div class="col-md-4 mb-3">
                <label for="{{ form.weight.id_for_label }}" class="form-label">Peso (kg)</label>
                {{ form.weight }}
                {% if form.weight.errors %}
                  <div class="text-danger small">{{ form.weight.errors }}</div>
                {% endif %}
              </div>
            </div>

            <div class="mb-3">
              <label for="{{ form.position.id_for_label }}" class="form-label">Posição</label>
              {{ form.position }}
              {% if form.position.errors %}
                <div class="text-danger small">{{ form.position.errors }}</div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.bio.id_for_label }}" class="form-label">Biografia</label>
              {{ form.bio }}
              {% if form.bio.errors %}
                <div class="text-danger small">{{ form.bio.errors }}</div>
              {% endif %}
              <div class="form-text small text-muted">Conte um pouco sobre sua carreira, conquistas e objetivos.</div>
            </div>

            <div class="mb-4">
              <label for="{{ form.video_link.id_for_label }}" class="form-label">Link de Vídeo Destaque</label>
              {{ form.video_link }}
              {% if form.video_link.errors %}
                <div class="text-danger small">{{ form.video_link.errors }}</div>
              {% endif %}
              <div class="form-text small text-muted">Cole aqui o link do YouTube com seu vídeo de destaque.</div>
            </div>

            <!-- Exigências Contratuais -->
            <hr>
            <div class="card mb-4">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="fas fa-file-contract me-2"></i>Exigências Contratuais
                </h5>
              </div>
              <div class="card-body">
                <div class="mb-4">
                  <label for="{{ form.desired_salary.id_for_label }}" class="form-label">
                    <i class="fas fa-dollar-sign me-2"></i>Salário Desejado (USD)
                  </label>
                  {{ form.desired_salary }}
                  {% if form.desired_salary.errors %}
                    <div class="text-danger small">{{ form.desired_salary.errors }}</div>
                  {% endif %}
                  <div class="form-text text-muted">
                    <i class="fas fa-info-circle me-1"></i>Informe o valor mensal desejado em dólares americanos
                  </div>
                </div>

                <div class="table-responsive">
                  <table class="table table-bordered">
                    <thead class="table-light">
                      <tr>
                        <th>Benefício</th>
                        <th>Opções</th>
                        <th>Detalhes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="align-middle">
                          <i class="fas fa-home text-primary me-2"></i>Moradia
                        </td>
                        <td class="align-middle">
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="housing_none" name="needs_housing" value="none" {% if not form.needs_housing.value %}checked{% endif %}>
                            <label class="form-check-label" for="housing_none">Não necessário</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="housing_shared" name="needs_housing" value="shared" {% if form.needs_housing.value == 'shared' %}checked{% endif %}>
                            <label class="form-check-label" for="housing_shared">Compartilhada</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="housing_private" name="needs_housing" value="private" {% if form.needs_housing.value == 'private' %}checked{% endif %}>
                            <label class="form-check-label" for="housing_private">Privativa</label>
                          </div>
                        </td>
                        <td class="text-muted small">Inclui acomodação durante o contrato</td>
                      </tr>
                      
                      <tr>
                        <td class="align-middle">
                          <i class="fas fa-utensils text-primary me-2"></i>Alimentação
                        </td>
                        <td class="align-middle">
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="food_none" name="needs_food" value="none" {% if not form.needs_food.value %}checked{% endif %}>
                            <label class="form-check-label" for="food_none">Não necessário</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="food_partial" name="needs_food" value="partial" {% if form.needs_food.value == 'partial' %}checked{% endif %}>
                            <label class="form-check-label" for="food_partial">Parcial</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="food_full" name="needs_food" value="full" {% if form.needs_food.value == 'full' %}checked{% endif %}>
                            <label class="form-check-label" for="food_full">Completa</label>
                          </div>
                        </td>
                        <td class="text-muted small">Inclui refeições diárias</td>
                      </tr>
                      
                      <tr>
                        <td class="align-middle">
                          <i class="fas fa-bus text-primary me-2"></i>Transporte
                        </td>
                        <td class="align-middle">
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="transport_none" name="needs_transport" value="none" {% if not form.needs_transport.value %}checked{% endif %}>
                            <label class="form-check-label" for="transport_none">Não necessário</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="transport_local" name="needs_transport" value="local" {% if form.needs_transport.value == 'local' %}checked{% endif %}>
                            <label class="form-check-label" for="transport_local">Local</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="transport_full" name="needs_transport" value="full" {% if form.needs_transport.value == 'full' %}checked{% endif %}>
                            <label class="form-check-label" for="transport_full">Completo</label>
                          </div>
                        </td>
                        <td class="text-muted small">Inclui deslocamento local</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="d-flex justify-content-between mt-4">
              <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">Cancelar</a>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save me-1"></i>Salvar Alterações
              </button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
